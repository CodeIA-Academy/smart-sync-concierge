{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Contact",
  "description": "Esquema de un contacto en Smart-Sync Concierge (doctores, staff, recursos)",
  "type": "object",
  "required": ["id", "nombre", "tipo", "activo", "created_at"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^contact_[a-z0-9_]+$",
      "description": "ID único del contacto",
      "examples": ["contact_dr_perez", "contact_staff_recepcion", "contact_sala_rx_1"]
    },
    "nombre": {
      "type": "string",
      "minLength": 2,
      "maxLength": 100,
      "description": "Nombre completo del contacto",
      "examples": ["Dr. Juan Pérez", "Dra. María García", "Sala de Rayos X"]
    },
    "tipo": {
      "type": "string",
      "enum": ["doctor", "staff", "resource"],
      "description": "Tipo de contacto"
    },
    "especialidad": {
      "type": "string",
      "description": "Especialidad (para doctores)",
      "examples": ["Cardiología", "Pediatría", "Medicina General"]
    },
    "email": {
      "type": "string",
      "format": "email",
      "description": "Email de contacto"
    },
    "telefono": {
      "type": "string",
      "pattern": "^\\+[1-9]\\d{1,14}$",
      "description": "Teléfono con código de país (E.164 format)",
      "examples": ["+525512345678", "+34600123456"]
    },
    "categoria": {
      "type": "string",
      "description": "Categoría (para recursos)",
      "examples": ["equipo_medico", "instalacion", "mobiliario"]
    },
    "activo": {
      "type": "boolean",
      "description": "Si el contacto está activo",
      "default": true
    },
    "ubicaciones": {
      "type": "array",
      "description": "Ubicaciones donde está disponible el contacto",
      "items": {
        "type": "object",
        "required": ["id", "nombre", "direccion", "timezone"],
        "properties": {
          "id": {
            "type": "string",
            "pattern": "^loc_[a-z0-9_]+$",
            "description": "ID único de la ubicación",
            "examples": ["loc_consultorio_principal", "loc_sala_rx_1"]
          },
          "nombre": {
            "type": "string",
            "description": "Nombre de la ubicación",
            "examples": ["Consultorio Principal", "Sala RX 1", "Planta Baja"]
          },
          "direccion": {
            "type": "string",
            "description": "Dirección física",
            "examples": ["Av. Reforma 123, CDMX", "Planta Baja, Edificio A"]
          },
          "coordenadas": {
            "type": "object",
            "description": "Coordenadas GPS",
            "properties": {
              "lat": {
                "type": "number",
                "minimum": -90,
                "maximum": 90
              },
              "lng": {
                "type": "number",
                "minimum": -180,
                "maximum": 180
              }
            }
          },
          "timezone": {
            "type": "string",
            "format": "timezone",
            "description": "Zona horaria (IANA database)",
            "examples": ["America/Mexico_City", "Europe/Madrid", "America/New_York"]
          },
          "horario": {
            "type": "object",
            "description": "Horario de atención en esta ubicación",
            "properties": {
              "inicio": {
                "type": "string",
                "pattern": "^[0-9]{2}:[0-9]{2}$",
                "description": "Hora de inicio (HH:MM)",
                "examples": ["09:00"]
              },
              "fin": {
                "type": "string",
                "pattern": "^[0-9]{2}:[0-9]{2}$",
                "description": "Hora de fin (HH:MM)",
                "examples": ["18:00"]
              },
              "dias_laborales": {
                "type": "array",
                "description": "Días laborales (1=lun, 2=mar, ..., 7=dom)",
                "items": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 7
                },
                "default": [1, 2, 3, 4, 5]
              },
              "duracion_slot_minutos": {
                "type": "integer",
                "description": "Duración default de cada slot",
                "minimum": 15,
                "maximum": 240,
                "default": 60
              },
              "descanso_minutos": {
                "type": "integer",
                "description": "Minutos de descanso entre slots",
                "minimum": 0,
                "maximum": 60,
                "default": 15
              }
            },
            "required": ["inicio", "fin", "dias_laborales"]
          },
          "capacidad": {
            "type": "integer",
            "description": "Capacidad de personas simultáneas (para recursos)",
            "minimum": 1
          }
        }
      },
      "minItems": 1
    },
    "metadatos": {
      "type": "object",
      "description": "Metadatos adicionales del contacto",
      "properties": {
        "licencia": {
          "type": "string",
          "description": "Número de licencia (para doctores)"
        },
        "universidad": {
          "type": "string",
          "description": "Universidad de egreso"
        },
        "anos_experiencia": {
          "type": "integer",
          "minimum": 0
        },
        "idiomas": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Idiomas hablados"
        },
        "notas": {
          "type": "string",
          "maxLength": 1000
        }
      }
    },
    "configuracion": {
      "type": "object",
      "description": "Configuración específica del contacto",
      "properties": {
        "requiere_confirmacion": {
          "type": "boolean",
          "description": "Si requiere confirmación de cita",
          "default": false
        },
        "anticipacion_minima_minutos": {
          "type": "integer",
          "description": "Anticipación mínima para agendar",
          "minimum": 0,
          "default": 60
        },
        "anticipacion_maxima_dias": {
          "type": "integer",
          "description": "Anticipación máxima para agendar",
          "minimum": 1,
          "default": 90
        },
        "permite_sobrecupo": {
          "type": "boolean",
          "description": "Si permite citas sobrepuestas",
          "default": false
        }
      }
    },
    "estadisticas": {
      "type": "object",
      "description": "Estadísticas del contacto",
      "properties": {
        "total_citas": {
          "type": "integer",
          "description": "Total de citas históricas"
        },
        "citas_completadas": {
          "type": "integer"
        },
        "citas_canceladas": {
          "type": "integer"
        },
        "citas_no_show": {
          "type": "integer"
        },
        "tasa_asistencia": {
          "type": "number",
          "description": "Tasa de asistencia (0-1)",
          "minimum": 0,
          "maximum": 1
        },
        "ultima_cita": {
          "type": "string",
          "format": "date-time"
        },
        "proxima_cita": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "Fecha de creación"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "description": "Fecha de última actualización"
    }
  },
  "examples": [
    {
      "id": "contact_dr_perez",
      "nombre": "Dr. Juan Pérez",
      "tipo": "doctor",
      "especialidad": "Cardiología",
      "email": "juan.perez@clinica.example.com",
      "telefono": "+525512345678",
      "activo": true,
      "ubicaciones": [
        {
          "id": "loc_consultorio_1",
          "nombre": "Consultorio Principal",
          "direccion": "Av. Reforma 123, CDMX",
          "coordenadas": {
            "lat": 19.4326,
            "lng": -99.1332
          },
          "timezone": "America/Mexico_City",
          "horario": {
            "inicio": "09:00",
            "fin": "18:00",
            "dias_laborales": [1, 2, 3, 4, 5],
            "duracion_slot_minutos": 60,
            "descanso_minutos": 15
          }
        }
      ],
      "metadatos": {
        "licencia": "123456",
        "universidad": "UNAM",
        "anos_experiencia": 15,
        "idiomas": ["es", "en"]
      },
      "configuracion": {
        "requiere_confirmacion": true,
        "anticipacion_minima_minutos": 60,
        "anticipacion_maxima_dias": 90
      },
      "created_at": "2026-01-01T00:00:00Z"
    },
    {
      "id": "contact_sala_rx_1",
      "nombre": "Sala de Rayos X 1",
      "tipo": "resource",
      "categoria": "equipo_medico",
      "activo": true,
      "ubicaciones": [
        {
          "id": "loc_sala_rx_1",
          "nombre": "Sala RX Planta Baja",
          "direccion": "Planta Baja, Edificio A",
          "timezone": "America/Mexico_City",
          "horario": {
            "inicio": "08:00",
            "fin": "20:00",
            "dias_laborales": [1, 2, 3, 4, 5]
          },
          "capacidad": 5
        }
      ],
      "created_at": "2026-01-01T00:00:00Z"
    }
  ]
}
